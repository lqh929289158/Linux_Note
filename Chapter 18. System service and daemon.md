# Chapter 18. System service and daemon

# 1. What is `daemon` and service
## 1.1 `daemon` types

### stand_alone: start a service by itself

Daemon can start a service without other mechanism. The loaded daemon will stay in the memory all the time but the response is **fast** too.

### super_daemon: one daemon manages all services

When there is no request, `xinetd`(super_daemon) will deallocate all resources. It will call service when requests come from clients. `xinetd` has **security** mechanism. No busy system resources. But it will be **slower** to respond request!

### signal-control and interval-control

## 1.2 Service and Port

The mapping from port to service is stored in `/etc/services`.

```
[root@www ~]# cat /etc/services
....(前面省略)....
ftp             21/tcp
ftp             21/udp          fsp fspd
ssh             22/tcp                          # SSH Remote Login Protocol
ssh             22/udp                          # SSH Remote Login Protocol
....(中间省略)....
http            80/tcp          www www-http    # WorldWideWeb HTTP
http            80/udp          www www-http    # HyperText Transfer Protocol
....(底下省略)....
# 这个文件的内容是以底下的方式来编排的：
# <daemon name>   <port/封包协议>   <该服务的说明>
```

## 1.3 Daemon start script

The PID of the programs that daemons started will be logged at `/var/run`

To start a daemon, you have to consider files to use, configuration files, running environment and so on. So it will be safer and easier to start a daemon with a script.

- `/etc/init.d/*`: Start script.(**IMPORTANT**)
- `/etc/sysconfig/*`: Configuration files.(IMPORTANT)
- `/etc/xinetd.conf`, `/etc/xinetd.d/*`: Configuration files of super daemon.
- `/etc/*`: Configuration files of each service
- `/var/lib/*`: The libraries generated by each service.
- `/var/run/*`: The PID of each service.

# 2. Analyze configuration of **super daemon**

# 3. Firewall of service `xinetd`, `TCP Wrappers`

# 4. Services started by system
